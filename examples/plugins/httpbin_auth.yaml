# httpbin_auth.yaml - YAML plugin with header authentication
#
# Demonstrates injecting auth headers via environment variables.
# The ${VAR} syntax expands environment variables at request time.
#
# Usage:
#   1. Symlink to plugins directory:
#      ln -s $(pwd)/examples/plugins/httpbin_auth.yaml ~/.config/graftpunk/plugins/
#   2. Set auth (base64 of "user:pass"):
#      export HTTPBIN_AUTH="dXNlcjpwYXNz"
#   3. Run commands:
#      gp httpbin-auth whoami
#      gp httpbin-auth basic-auth --user testuser --pass testpass

site_name: httpbin-auth
session_name: ""  # No cached session needed
help: "httpbin.org with authentication headers"
base_url: "https://httpbin.org"

headers:
  Authorization: "Basic ${HTTPBIN_AUTH}"

commands:
  whoami:
    help: "Check that auth header is being sent"
    method: GET
    url: "/headers"
    jmespath: "headers.Authorization"

  bearer-test:
    help: "Test bearer token endpoint (returns 200 if Authorization header present)"
    method: GET
    url: "/bearer"
